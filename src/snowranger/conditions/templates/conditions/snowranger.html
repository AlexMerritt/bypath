<!DOCTYPE html>
<html lang="en">

<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">



    <style>

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #map {
        height: 100%;
      }
	.controls {
	  margin-top: 10px;
	  border: 1px solid transparent;
	  border-radius: 2px 0 0 2px;
	  box-sizing: border-box;
	  -moz-box-sizing: border-box;
	  height: 32px;
	  outline: none;
	  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
	}

	#pac-input {
	  background-color: #fff;
	  font-family: Roboto;
	  font-size: 15px;
	  font-weight: 300;
	  margin-left: 12px;
	  padding: 0 11px 0 13px;
	  text-overflow: ellipsis;
	  width: 300px;
	}

	#pac-input:focus {
	  border-color: #4d90fe;
	}

	.pac-container {
	  font-family: Roboto;
	}

	#type-selector {
	  color: #fff;
	  background-color: #4d90fe;
	  padding: 5px 11px 0px 11px;
	}

	#type-selector label {
	  font-family: Roboto;
	  font-size: 13px;
	  font-weight: 300;
	}

    </style>
    <title>Places Searchbox</title>
    <style>
      #target {
        width: 345px;
      }
    </style>



<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="../../favicon.ico">
	<style>
		#map {
		height: 440px;
		}
	</style>

<title>Snowranger</title>

	<script src="//www.parsecdn.com/js/parse-1.6.7.min.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=places&sensor=false"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
	integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ=="
	crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"
	integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX"
	crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"
	integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ=="
	crossorigin="anonymous"></script>
</head>

<body role="document">


	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
					aria-expanded="false">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>

<a class="pull-left" href="#">{% load staticfiles %}<img class="img-responsive" src="{% static "img/snowranger.png" %}" width="50px"/></a>				

			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				 
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Plan Your Trip<span
							class="sr-only">(current)</span></a></li>
					<li><a href="#">Recent Updates</a></li>
					<li><a href="#">About</a></li>
				</ul>
			</div>
		</div>
	</nav>
	<section id="content"></section>
       <div class="container">




           <p>(Display current weather here.)</p>
       </div>
   		
    		<div class="container">
           <div class="input-group">
               <span class="input-group-addon" id="basic-addon1">I'm Coming From </span>
               <input type="text" class="form-control" placeholder="Starting Point" aria-describedby="basic-addon1">
           </div>

           <div class="input-group">
               <span class="input-group-addon" id="basic-addon2">I'm Going To</span>
               <input type="text" class="form-control" placeholder="Destination" aria-describedby="basic-addon1">
           </div>
		   <div class="jumbotron" id="map">The map ought to go here</div>
		   <input id="pac-input" class="controls" type="text" placeholder="Search Box">
    <div id="map"></div>
       </div>
       <!-- Our Google Maps API Key is AIzaSyC-fJe5RYynbYJhTOpfXW6bX8OSFhITKkQ  -->
		<!--
		Parse snowranger Application ID is ikx3kRNF4RME6dqQblg2t06q5ETzRsklLOOHC7QD
		Parse snowranger javascript key is 6kYKiz88UsscRqK2NFO2TIGqrU3UloA3hpA8r1kv
		-->
<script>

Parse.initialize("ikx3kRNF4RME6dqQblg2t06q5ETzRsklLOOHC7QD", "6kYKiz88UsscRqK2NFO2TIGqrU3UloA3hpA8r1kv");


var Condition = Parse.Object.extend("Condition");
var query = new Parse.Query(Condition);


query.greaterThan("nummy", 0);
query.find({
	success:  function(condition) {

		alert("Successfully retrieved " + condition.length + " descriptions.");

		for (var i = 0; i < condition.length; i++) {

			var Dascro = condition[i].get("description");
			var Lasco = condition[i].get("location");
			var Imagio = condition[i].get("image");
			var ImagioURL = Imagio.url();

			//console.log(Lasco.latitude);
			//console.log(Lasco.longitude);
			//console.log(Dascro);
			//console.log(Lasco);
			//console.log(Imagio);
			//console.log(Imagio.name);
			//console.log(Imagio.url);
			//console.log(Imagio.url()); 

			var Gloc = new google.maps.LatLng(Lasco.latitude, Lasco.longitude);

			var marque = new google.maps.Marker({
				position: Gloc,
				title: "Call me Parsey"
			});

			marque.setMap(map);

			var infowindow = new google.maps.InfoWindow({
					content: "<IMG BORDER='0' ALIGN='Center' SRC='"+ImagioURL+"'>" + "My name is Johannes."
			});

			marque.addListener('click', function() {
					infowindow.open(map, marque);
					alert("I'm a marker inside the Parse fn");
			});

		}
	},


	error: function(object, error) {
		alert("could not retrieve parse object");
	}
}); 


var map;
function initMap() {
	alert("Hi Pooja!");

	map = new google.maps.Map(document.getElementById('map'), {
	   center: {lat: 65.9667, lng: -18.5333},
	   zoom: 14,
	   mapTypeId: google.maps.MapTypeId.ROADMAP
	});

	// Create the search box and link it to the UI element.
	  var input = document.getElementById('pac-input');
	  var searchBox = new google.maps.places.SearchBox(input);
	  map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

	 // Bias the SearchBox results towards current map's viewport.
	  map.addListener('bounds_changed', function() {
	    searchBox.setBounds(map.getBounds());
	  });


var markers = [];
  // [START region_getplaces]
  // Listen for the event fired when the user selects a prediction and retrieve
  // more details for that place.
  searchBox.addListener('places_changed', function() {
    var places = searchBox.getPlaces();

    if (places.length == 0) {
      return;
    }

    // Clear out the old markers.
    markers.forEach(function(marker) {
      marker.setMap(null);
    });
    markers = [];

    // For each place, get the icon, name and location.
    var bounds = new google.maps.LatLngBounds();
    places.forEach(function(place) {
      var icon = {
        url: place.icon,
        size: new google.maps.Size(71, 71),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(17, 34),
        scaledSize: new google.maps.Size(25, 25)
      };

      // Create a marker for each place.
      markers.push(new google.maps.Marker({
        map: map,
        icon: icon,
        title: place.name,
        position: place.geometry.location
      }));

      if (place.geometry.viewport) {
        // Only geocodes have viewport.
        bounds.union(place.geometry.viewport);
      } else {
        bounds.extend(place.geometry.location);
      }
    });
    map.fitBounds(bounds);
  });
  // [END region_getplaces]







	var StataGehry = new google.maps.LatLng(42.3618181, -71.090346);
	var Harvard = new google.maps.LatLng(42.3770029, -71.1166601);

	var marker = new google.maps.Marker({
		position: StataGehry,
		title: "World's best marker!"
	});
	var marker2 = new google.maps.Marker({
		position: Harvard,
		title: "Je suis un geo!"
	});
	marker.setMap(map);
	marker2.setMap(map);



	var contentString = "I'm silly";

	var infowindow = new google.maps.InfoWindow({
		content: "I'm goofy"
	});

	marker.addListener('click', function() {
		infowindow.open(map, marker);
		alert("click on a marker to open infowindow");
	});


	var infowindow27 = new google.maps.InfoWindow({
		content: "I'm number 27"
	});

	marker2.addListener('click', function() {
		infowindow27.open(map, marker2);
		alert("click on a marker to open infowindow");
	});


};
google.maps.event.addDomListener(window, 'load', initMap);



</script>
       <!-- <script async defer
        // src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDWvofY75CUfQxEHDPCxMuZK46WKGtTb0=initMap">
       </script>
       -->
</body>
</html>
